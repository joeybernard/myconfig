This file contains all of my notes around the work for CHAIN and E-CHAIM.
This will contain a work log as well as todo items that need to be tracked.

* <2018-09-05 Wed>
** Applied the command
    git config --global http.sslVerify false
   to my work machine.

** Had to disable selinux on the compute machine.
   #+BEGIN_SRC shell
     sudo setenforce Permissive
   #+END_SRC
*** Then edited /etc/sysconfig/selinux and set "SELINUX=disabled"


* <2018-09-04 Tue>
** TODO Create a data file that generates the problem in January 1 2011 :ECHAIM:

** DONE There is an issue with forwarding SSL connections from apache through to gitlab when using "git clone"
   CLOSED: [2018-09-04 Tue 22:59]
*** Changed the certificate entry in /etc/httpd/conf.d/ssl.conf to use fullchain.pem.
    Will restart httpd tonight to see if this fixes the SSL problem.
    This did not work. Can't find a complete solution.
*** Just tell git not to verify the SSL certs with the command
    git config --global http.sslVerify false

** DONE Compiled a new version of echaim, using the release version. Copied the file ECHAIM.c into the lib directory, then used the following to compile: :ECHAIM:
   CLOSED: [2018-09-04 Tue 13:32]
   gcc -o echaim *.c -std=c99 -lm -pthread -ldl

** TODO Redo the output list and file to use the same file format as that used by gnuplot. :ECHAIM:


* <2018-09-03 Mon>
** TODO Create a cron job to pull the latest E-CHAIM DB to chain-new :ECHAIM:
*** The script needs to keep a date stamped version of the older DBs
*** The files are CHAIM_DB.db and MATLAB_DB.mat in /var/www/html/joomla/echaim_downloads
*** The new files on chain-cs1.chain-project.net
      /home2/amccaffr/ECHAIM_DB/CHAIM_DB.db
      /home2/amccaffr/ECHAIM_DB/CSV/MATLAB_DB.mat
*** Edited the file /home2/ammcaffr/ECHAIM_DB/autodb.sh so that it would copy the new database files to /home/jbernard/DB

** TODO Create a start script for apache and mariadb on chain-new    :ECHAIM:

** DONE Rdesign gnuplot script for E-CHAIM web application	     :ECHAIM:
   CLOSED: [2018-09-03 Mon] The script below is the core functionality to generate the plots and then display them on the web application.    
   $script = $cwd . "/" . $id . "/temp.gnuplot";
   $pd = fopen($script, "w");
   fwrite($pd, "set term pngcairo font ',7' size 800,600\n");
   fwrite($pd, "set out '../images/echaim/".$id."ECHAIMOutput.png'\n");
   fwrite($pd, "unset key\n");
   fwrite($pd, "set contour base\n");
   fwrite($pd, "set cntrparam bspline\n");
   fwrite($pd, "set cntrparam levels auto 5\n");
   fwrite($pd, "set style data lines\n");
   fwrite($pd, "set timefmt '%Y%m%d%H%M%S'\n");
   fwrite($pd, "set xdata time\n");
   fwrite($pd, "set xlabel 'Date - Time'\n");
   fwrite($pd, "set xtics 17280\n");
   fwrite($pd, "set ylabel 'Longitude'\n");
   if ($parameter == "NmF2") {
      fwrite($pd, "set zlabel 'NmF2 [10^{11} m^{-3}]'\n");
      fwrite($pd, "set title 'NmF2 [10^{11} m^{-3}] - Latitude = ".$latitude."'\n");
      fwrite($pd, "splot 'data.dat' using 1:2:($3/1e11) palette\n");
   } elseif ($parameter == "hmF2") {
      fwrite($pd, "set zlabel 'height[km]'\n");
      fwrite($pd, "set title 'hmF2 [km] - Latitude = ".$latitude."'\n");
      fwrite($pd, "splot 'data.dat' using 1:2:3 palette\n");
   } elseif ($parameter == "hmF1") {
      fwrite($pd, "set zlabel 'height[km]'\n");
      fwrite($pd, "set title 'hmF1 [km] - Latitude = ".$latitude."'\n");
      fwrite($pd, "splot 'data.dat' using 1:2:3 palette\n");
   }
   fwrite($pd, "set out\n");
   fclose($pd);
   $dd = fopen($id."/data.dat", "w");
   $curr_long = $longitudes[0];
   for ($j=0; $j<$interval_count2; $j++) {
      for ($i=0; $i<$interval_count; $i++) {
         $data_str = $arr[$i]." ".$curr_long." ".$data_mat[$i][$j];
         fwrite($dd, $data_str);
      }
      fwrite($dd, "\n");
      $curr_long = $curr_long + $longitudes[1];
   }
   fclose($dd);
   $str_cmd = "cd ".$id."; /usr/local/bin/gnuplot temp.gnuplot";
   shell_exec($str_cmd);
   echo "&lt;img src='https://chain-new.chain-project.net/images/echaim/".$id."ECHAIMOutput.png'&gt;";
