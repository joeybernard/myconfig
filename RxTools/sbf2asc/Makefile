#
# Makefile to rebuild the "sbf2asc" tool
#
# (c) 2012-2015 Copyright Septentrio NV/SA. All rights reserved.

# $(CC) should be your C compiler, for instance:
# CC	= gcc

# On some platform (Cygwin + GCC 3.2, i.e.), doubles are aligned on an
# 8 bytes boundary by default. The GCC i386 "-mno-align-double" option
# packs the structure and makes it binary compatible with SBF data
# generated by the receivers.
CFLAGS	= -O -mno-align-double -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE

LDFLAGS = -lm 

COMMON_OBJS	= sbfread.o ssngetop.o crc.o
ALL_OBJS	= sbf2asc.o $(COMMON_OBJS)

sbf2asc : sbf2asc.o $(COMMON_OBJS)
	$(CC) $^ -o $@ $(LDFLAGS)

%.o	: %.c
	$(CC) -c $(CFLAGS) -o $@ $<

clean	:
	rm sbf2asc $(ALL_OBJS) 

# Source dependencies:

sbf2asc.o 	: sbf2asc.c ssngetop.h sbfread.h ssntypes.h sbfdef.h sbfsigtypes.h sbf2asc_version.h mscinttypes.h mscssntypes.h mscstdint.h

sbfread.o       : sbfread.c sbfread.h crc.h ssntypes.h sbfdef.h sbfsigtypes.h mscinttypes.h mscssntypes.h mscstdint.h

ssngetop.o    	: ssngetop.c ssngetop.h

crc.o    	: crc.c crc.h ssntypes.h sbfdef.h mscinttypes.h mscssntypes.h mscstdint.h

# End of Makefile
